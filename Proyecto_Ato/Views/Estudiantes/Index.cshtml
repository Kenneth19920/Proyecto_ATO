@model IEnumerable<Proyecto_Ato.Models.Estudiantes>

@{
    ViewBag.Title = "Index";
    int index = 0;
}





<div class="row" style="display: inline-block;">
    <div class="tile_count">
        <div class="col-md-4 col-sm-4  tile_stats_count">
            <span class="count_top"><i class="fa fa-user"></i> Total de Estudiantes</span>
            <div class="count">@Html.Action("ObtenerNumeroEstudiantes", "Estudiantes")</div>
            <span class="count_bottom"><i class="green">100% </i> Registrados</span>
        </div>
        <div class="col-md-4 col-sm-4  tile_stats_count">
            <span class="count_top"><i class="fa fa-birthday-cake"></i> Proximo Cumpleaños</span>
            <div class="count green">@Html.Action("ObtenerDiasParaProximoCumpleaños", "Estudiantes")</div>
            <span class="count_bottom"><i class="green"><i class="fa fa-sort-asc"></i></i>Días Faltantes</span>
        </div>

        <div class="col-md-4 col-sm-4  tile_stats_count">
            <span class="count_top"><i class="fa fa-bullhorn"></i> Nombre del Cumpleañero</span>
            <div class="count">@Html.Action("ObtenerNombreProximoCumpleañeros", "Estudiantes")</div>
        </div>


    </div>
</div>

<hr />
<div class="container">
    <div class="row">
        <div class="col">
            <div class=" pull-right top_search">
                <div class="input-group">
                    <input id="searchInput" type="text" class="form-control" placeholder="Buscar..." />

                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button">Go!</button>
                    </span>
                    <a href="@Url.Action("Create", "Estudiantes")" class=" float-right " style="padding-left: 20px;">
                        <button class="cssbuttons-io-button">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                                <path fill="none" d="M0 0h24v24H0z"></path>
                                <path fill="currentColor" d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"></path>
                            </svg>
                            <span class="button-text-spacing">Agregar</span>
                        </button>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="col-md-12 col-sm-12 ">
    <div class="x_panel">
        <div class="x_title">
            <h2>Tabla de Estudiantes</h2>
            <ul class="nav navbar-right panel_toolbox">
                <li>
                    <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                </li>
              
              
            </ul>
            <div class="clearfix"></div>
        </div>
        <div class="x_content">
            <div class="row">
                <div class="col-sm-12">
                    <div class="card-box table-responsive">
                        <div id="datatable-keytable_wrapper" class="dataTables_wrapper container-fluid dt-bootstrap no-footer">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="dataTables_length" id="datatable-keytable_length">
                                        <label>
                                            Ver <select name="datatable-keytable_length" aria-controls="datatable-keytable" class="form-control input-sm">
                                                <option value="10">10</option>
                                                <option value="25">25</option>
                                                <option value="50">50</option>
                                                <option value="100">100</option>
                                            </select>
                                        </label>
                                    </div>
                                </div>

                                <div class="col-sm-6">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12">
                                    <div style="position: absolute; height: 1px; width: 0px; overflow: hidden;">
                                        <input type="text" tabindex="0">
                                    </div>
                                    <table id="datatable-keytable" class="table table-striped table-bordered dataTable no-footer" style="width: 100%; position: relative;" role="grid" aria-describedby="datatable-keytable_info">
                                        <thead>
                                            <tr role="row">
                                                <th>@Html.DisplayNameFor(model => model.Nombre)</th>
                                                <th>@Html.DisplayNameFor(model => model.PrimerApellido)</th>
                                                <th>@Html.DisplayNameFor(model => model.Cedula)</th>
                                                <th>@Html.DisplayNameFor(model => model.FechaNacimiento)</th>
                                                <th>@Html.DisplayNameFor(model => model.Edad)</th>
                                                <th>@Html.DisplayNameFor(model => model.Peso)</th>
                                                <th>@Html.DisplayNameFor(model => model.Telefono)</th>


                                            </tr>
                                        </thead>
                                        <tbody>


                                            @foreach (var item in Model)
                                            {
                                                string rowClass = index % 2 == 0 ? "even" : "odd";

                                                <tr role="row" class="rowClass">
                                                    <td class="sorting_1">@Html.DisplayFor(modelItem => item.Nombre)</td>
                                                    <td>@Html.DisplayFor(modelItem => item.PrimerApellido)</td>

                                                    <td>@Html.DisplayFor(modelItem => item.Cedula)</td>
                                                    <td>@Html.DisplayFor(modelItem => item.FechaNacimiento)</td>
                                                    <td>@Html.DisplayFor(modelItem => item.Edad)</td>
                                                    <td>@Html.DisplayFor(modelItem => item.Peso)</td>
                                                    <td>@Html.DisplayFor(modelItem => item.Telefono)</td>


                                                    <td>

                                                        <a href="@Url.Action("Edit", new { id = item.IdEstudiante })" class="btn btn-primary"><i class="fa fa-pencil"></i> Editar </a>
                                                        <a href="@Url.Action("Details", new { id = item.IdEstudiante })" class="btn btn-info"><i class="fa fa-info-circle"></i> Detalle </a>
                                                        <button class="btn btn-info" onclick="openModal(@item.IdEstudiante)">Detalle</button>


                                                        <a href="@Url.Action("Delete", new { id = item.IdEstudiante })" class="btn btn-danger"><i class="fa fa-trash-o"></i> Eliminar </a>

                                                    </td>


                                                </tr>



                                                index++;

                                            }

                                        </tbody>
                                    </table>
                                </div>
                            </div>






                            <div class="row">
                                <div class="col-sm-5">
                                    <div class="dataTables_info" id="datatable-keytable_info" role="status" aria-live="polite">Showing 1 to 10 of 57 entries</div>
                                </div><div class="col-sm-7">
                                    <div class="dataTables_paginate paging_simple_numbers" id="datatable-keytable_paginate">
                                        <ul class="pagination">
                                            <li class="paginate_button previous disabled" id="datatable-keytable_previous">
                                                <a href="#" aria-controls="datatable-keytable" data-dt-idx="0" tabindex="0">Previous</a>
                                            </li>
                                            <li class="paginate_button active">
                                                <a href="#" aria-controls="datatable-keytable" data-dt-idx="1" tabindex="0">1</a>
                                            </li>
                                            <li class="paginate_button ">
                                                <a href="#" aria-controls="datatable-keytable" data-dt-idx="2" tabindex="0">2</a>
                                            </li>
                                            <li class="paginate_button ">
                                                <a href="#" aria-controls="datatable-keytable" data-dt-idx="3" tabindex="0">3</a>
                                            </li>
                                            <li class="paginate_button ">
                                                <a href="#" aria-controls="datatable-keytable" data-dt-idx="4" tabindex="0">4</a>
                                            </li>
                                            <li class="paginate_button ">
                                                <a href="#" aria-controls="datatable-keytable" data-dt-idx="5" tabindex="0">5</a>
                                            </li>
                                            <li class="paginate_button ">
                                                <a href="#" aria-controls="datatable-keytable" data-dt-idx="6" tabindex="0">6</a>
                                            </li>
                                            <li class="paginate_button next" id="datatable-keytable_next">
                                                <a href="#" aria-controls="datatable-keytable" data-dt-idx="7" tabindex="0">Next</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


@section scripts {
    <script>
        function openModal(estudianteId) {
            $.ajax({
                url: '@Url.Action("GetEstudianteDetails", "Estudiantes")',
                type: 'GET',
                data: { id: estudianteId },
                success: function (data) {
                    // Actualiza el contenido del modal con los detalles del estudiante
                    $('.modal-body').html(data);
                    // Abre el modal
                    $('#myModal').modal('show');
                },
                error: function (xhr, status, error) {
                    alert('Error al obtener los detalles del estudiante.');
                }
            });
        }
    </script>
}

